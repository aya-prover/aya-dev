# Early changelog

## 0.40

Aya now runs on Java 25.
The IntelliJ plugin will be temporarily unusable until [JBR-8242] is completed.

[JBR-8242]: https://youtrack.jetbrains.com/issue/JBR-8242

User-visible new features:

- There is now a pretty printer for the ANF IR. Use `:optimized-anf <def>` in the REPL to preview.
  This does not meant the REPL will JIT-compile them, however. It's only available in library
  checking mode.
- There is now GitHub workflow to automatically run Aya to check snippets in PRs and issues.
- Now `let`-bindings can be modified by `instance` to add it to instance search.
- Very, very preliminary support for instance search. Local instances only, and no filtering based on arguments.
- Aya is available on Nix cache and Cachix. See HACKING.md or the website for details.
- The `classifying` keyword, after being introduced for years, is now used. It works the same way as Arend, and similar to `SetLike` in Lean.
- The type hover generated by the literate mode is drastically changed.
  - The CSS-based type information is replaced with javascript-based hover popups, similar to the metavars.
  - The incorrect location on vitepress websites is also fixed.
  - There is now a horizontal scrollbar for horizontally long snippets, so the mobile reading experience is no longer rididudiculous.
  - Bullet items are no longer drastically separated. This issue is introduced from the markdown parser migration.
  - Hover types for definitions used to be the type of the entire application, and now it shows the type applied to implicit arguments until the first explicit argument. This makes them much more readable.
  - The constructor patterns will also show the type with `ownerArgs` instantiated, making the behavior consistent for constructors calls and constructor patterns.
- Link definition syntax in markdown now works.

Internal changes:

- `TermComparator` now returns a 3-valued `Decision` rather than a boolean.
- The `deriveX` methods now accepts hints to avoid creating contexts unnecessarily.
- `Pat.Con` now stores a nullable shape info that will be used in `PatToTerm` to correctly generate rule reducers.
- Eliminated usages of `CountingReporter.clear` and cleaned up the inconsistent implementations.

Website changes:

- There is now a reasonable color configuration for popups in dark mode.
